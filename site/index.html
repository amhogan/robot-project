<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Robot Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>body{font-family:system-ui,sans-serif;margin:1rem}#sys-stats{margin-top:1rem}</style>
</head>
<body>
  <h1>Robot Dashboard</h1>
  <div id="sys-stats">
    <div>CPU Temp: <span id="cpu-temp">—</span></div>
    <div>Uptime: <span id="uptime">—</span></div>
  </div>
  <script>
  async function fetchJSON(u){const r=await fetch(u,{cache:"no-store"});if(!r.ok)throw new Error(r.status);return r.json()}
  function formatUptime(s){if(s==null)return"—";const d=Math.floor(s/86400),h=Math.floor(s%86400/3600),m=Math.floor(s%3600/60);return `${d}d ${h}h ${m}m`}
  async function updateTemp(){try{const j=await fetchJSON("/api/status_temp");const t=j.cpu_temp_c;document.getElementById("cpu-temp").textContent=(t==null)?"—":`${t.toFixed(1)} °C`}catch{document.getElementById("cpu-temp").textContent="—"}}
  async function updateUptime(){try{const j=await fetchJSON("/api/status_uptime");document.getElementById("uptime").textContent=formatUptime(j.uptime_seconds)}catch{document.getElementById("uptime").textContent="—"}}
  function schedule(){updateTemp();updateUptime();setInterval(()=>{updateTemp();updateUptime()},5000)}
  document.addEventListener("DOMContentLoaded", schedule);
  </script>
</body>
</html>
